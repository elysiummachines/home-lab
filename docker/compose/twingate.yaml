---
services:
  twingate_connector_1:
    image: twingate/connector:1
    container_name: twingate_connector_1
    environment:
      - TZ=America/Calgary
      - TWINGATE_NETWORK=cl0ckwerk
      - TWINGATE_ACCESS_TOKEN=${TWINGATE_ACCESS_TOKEN_1}
      - TWINGATE_REFRESH_TOKEN=${TWINGATE_REFRESH_TOKEN_1}
      - TWINGATE_LABEL_HOSTNAME=node3-prod-1
      - TWINGATE_LABEL_DEPLOYED_BY=docker
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "/connectord", "--version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 64M
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    networks:
      - twingate

  twingate_connector_2:
    image: twingate/connector:1
    container_name: twingate_connector_2
    environment:
      - TZ=America/Calgary
      - TWINGATE_NETWORK=cl0ckwerk
      - TWINGATE_ACCESS_TOKEN=${TWINGATE_ACCESS_TOKEN_2}
      - TWINGATE_REFRESH_TOKEN=${TWINGATE_REFRESH_TOKEN_2}
      - TWINGATE_LABEL_HOSTNAME=node3-prod-2
      - TWINGATE_LABEL_DEPLOYED_BY=docker
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "/connectord", "--version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 64M
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    networks:
      - twingate

  twingate_connector_3:
    image: twingate/connector:1
    container_name: twingate_connector_3
    environment:
      - TZ=America/Calgary
      - TWINGATE_NETWORK=cl0ckwerk
      - TWINGATE_ACCESS_TOKEN=${TWINGATE_ACCESS_TOKEN_3}
      - TWINGATE_REFRESH_TOKEN=${TWINGATE_REFRESH_TOKEN_3}
      - TWINGATE_LABEL_HOSTNAME=node3-prod-3
      - TWINGATE_LABEL_DEPLOYED_BY=docker
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "/connectord", "--version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 64M
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    networks:
      - twingate

  twingate_connector_4:
    image: twingate/connector:1
    container_name: twingate_connector_4
    environment:
      - TZ=America/Calgary
      - TWINGATE_NETWORK=cl0ckwerk
      - TWINGATE_ACCESS_TOKEN=${TWINGATE_ACCESS_TOKEN_4}
      - TWINGATE_REFRESH_TOKEN=${TWINGATE_REFRESH_TOKEN_4}
      - TWINGATE_LABEL_HOSTNAME=node3-prod-4
      - TWINGATE_LABEL_DEPLOYED_BY=docker
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "/connectord", "--version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 64M
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    networks:
      - twingate

  twingate_connector_5:
    image: twingate/connector:1
    container_name: twingate_connector_5
    environment:
      - TZ=America/Calgary
      - TWINGATE_NETWORK=cl0ckwerk
      - TWINGATE_ACCESS_TOKEN=${TWINGATE_ACCESS_TOKEN_5}
      - TWINGATE_REFRESH_TOKEN=${TWINGATE_REFRESH_TOKEN_5}
      - TWINGATE_LABEL_HOSTNAME=node3-prod-5
      - TWINGATE_LABEL_DEPLOYED_BY=docker
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "/connectord", "--version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 64M
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    networks:
      - twingate

  twingate_connector_6:
    image: twingate/connector:1
    container_name: twingate_connector_6
    environment:
      - TZ=America/Calgary
      - TWINGATE_NETWORK=cl0ckwerk
      - TWINGATE_ACCESS_TOKEN=${TWINGATE_ACCESS_TOKEN_6}
      - TWINGATE_REFRESH_TOKEN=${TWINGATE_REFRESH_TOKEN_6}
      - TWINGATE_LABEL_HOSTNAME=node3-prod-6
      - TWINGATE_LABEL_DEPLOYED_BY=docker
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "/connectord", "--version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 64M
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    networks:
      - twingate

  twingate_connector_7:
    image: twingate/connector:1
    container_name: twingate_connector_7
    environment:
      - TZ=America/Calgary
      - TWINGATE_NETWORK=cl0ckwerk
      - TWINGATE_ACCESS_TOKEN=${TWINGATE_ACCESS_TOKEN_7}
      - TWINGATE_REFRESH_TOKEN=${TWINGATE_REFRESH_TOKEN_7}
      - TWINGATE_LABEL_HOSTNAME=node3-prod-7
      - TWINGATE_LABEL_DEPLOYED_BY=docker
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "/connectord", "--version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 64M
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    networks:
      - twingate

  twingate_connector_8:
    image: twingate/connector:1
    container_name: twingate_connector_8
    environment:
      - TZ=America/Calgary
      - TWINGATE_NETWORK=cl0ckwerk
      - TWINGATE_ACCESS_TOKEN=${TWINGATE_ACCESS_TOKEN_8}
      - TWINGATE_REFRESH_TOKEN=${TWINGATE_REFRESH_TOKEN_8}
      - TWINGATE_LABEL_HOSTNAME=node3-prod-8
      - TWINGATE_LABEL_DEPLOYED_BY=docker
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "/connectord", "--version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 64M
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    networks:
      - twingate

  twingate_connector_9:
    image: twingate/connector:1
    container_name: twingate_connector_9
    environment:
      - TZ=America/Calgary
      - TWINGATE_NETWORK=cl0ckwerk
      - TWINGATE_ACCESS_TOKEN=${TWINGATE_ACCESS_TOKEN_9}
      - TWINGATE_REFRESH_TOKEN=${TWINGATE_REFRESH_TOKEN_9}
      - TWINGATE_LABEL_HOSTNAME=node3-prod-9
      - TWINGATE_LABEL_DEPLOYED_BY=docker
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "/connectord", "--version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 64M
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    networks:
      - twingate

  twingate_connector_10:
    image: twingate/connector:1
    container_name: twingate_connector_10
    environment:
      - TZ=America/Calgary
      - TWINGATE_NETWORK=cl0ckwerk
      - TWINGATE_ACCESS_TOKEN=${TWINGATE_ACCESS_TOKEN_10}
      - TWINGATE_REFRESH_TOKEN=${TWINGATE_REFRESH_TOKEN_10}
      - TWINGATE_LABEL_HOSTNAME=node3-prod-10
      - TWINGATE_LABEL_DEPLOYED_BY=docker
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "/connectord", "--version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 64M
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    networks:
      - twingate

  twingate_connector_11:
    image: twingate/connector:1
    container_name: twingate_connector_11
    environment:
      - TZ=America/Calgary
      - TWINGATE_NETWORK=cl0ckwerk
      - TWINGATE_ACCESS_TOKEN=${TWINGATE_ACCESS_TOKEN_11}
      - TWINGATE_REFRESH_TOKEN=${TWINGATE_REFRESH_TOKEN_11}
      - TWINGATE_LABEL_HOSTNAME=node3-prod-11
      - TWINGATE_LABEL_DEPLOYED_BY=docker
    restart: unless-stopped
    healthcheck:
      test: ["CMD", "/connectord", "--version"]
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s
    deploy:
      resources:
        limits:
          cpus: '0.2'
          memory: 64M
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
    networks:
      - twingate

networks:
  twingate:
    driver: bridge
